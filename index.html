<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#2ecc71">
    <title>Miei Risparmi</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; background-color: #f0f2f5; padding: 20px; }
        .widget { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); width: 100%; max-width: 350px; }
        h2 { text-align: center; color: #333; margin-bottom: 25px; }
        .categoria { margin-bottom: 15px; padding: 15px; background: #fdfdfd; border: 1px solid #eee; border-radius: 15px; }
        .nome-categoria { font-size: 0.8em; color: #888; text-transform: uppercase; margin-bottom: 10px; display: block; }
        .controlli { display: flex; align-items: center; justify-content: space-between; }
        button { width: 55px; height: 55px; border-radius: 50%; border: none; background-color: #2ecc71; color: white; font-size: 24px; font-weight: bold; cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        button.meno { background-color: #e74c3c; }
        .valore { font-size: 1.4em; font-weight: bold; font-family: monospace; }
        .totale-box { text-align: center; font-size: 2em; margin-top: 30px; color: #27ae60; border-top: 2px solid #f0f0f0; padding-top: 20px; }
    </style>
</head>
<body>

<div class="widget">
    <h2>I miei Risparmi</h2>
    <div class="categoria">
        <span class="nome-categoria">Banconote (+10€)</span>
        <div class="controlli">
            <button class="meno" onclick="aggiorna('banconote', -10)">-</button>
            <span id="banconote" class="valore">0.00 €</span>
            <button onclick="aggiorna('banconote', 10)">+</button>
        </div>
    </div>
    <div class="categoria">
        <span class="nome-categoria">Monete (+0.50€)</span>
        <div class="controlli">
            <button class="meno" onclick="aggiorna('monete', -0.5)">-</button>
            <span id="monete" class="valore">0.00 €</span>
            <button onclick="aggiorna('monete', 0.5)">+</button>
        </div>
    </div>
    <div class="categoria">
        <span class="nome-categoria">Monetine (+0.05€)</span>
        <div class="controlli">
            <button class="meno" onclick="aggiorna('monetine', -0.05)">-</button>
            <span id="monetine" class="valore">0.00 €</span>
            <button onclick="aggiorna('monetine', 0.05)">+</button>
        </div>
    </div>
    <div class="totale-box">
        <strong>Totale: <span id="totale">0.00</span> €</strong>
    </div>
</div>

<script>
    let dati = JSON.parse(localStorage.getItem('conteggioSoldi')) || { banconote: 0, monete: 0, monetine: 0 };

    function aggiorna(tipo, variazione) {
        let nuovoValore = dati[tipo] + variazione;
        if (nuovoValore < 0) nuovoValore = 0;
        dati[tipo] = nuovoValore;
        localStorage.setItem('conteggioSoldi', JSON.stringify(dati));
        mostraDati();
    }

    function mostraDati() {
        document.getElementById('banconote').innerText = dati.banconote.toFixed(2) + " €";
        document.getElementById('monete').innerText = dati.monete.toFixed(2) + " €";
        document.getElementById('monetine').innerText = dati.monetine.toFixed(2) + " €";
        let somma = dati.banconote + dati.monete + dati.monetine;
        document.getElementById('totale').innerText = somma.toFixed(2);
    }

    window.onload = mostraDati;
    window.addEventListener('focus', mostraDati);
</script>
</body>
</html>
